package GPU

import (
	"reflect"
	"testing"
)

func TestDecodeTile(t *testing.T) {
	var gpu = GPUFactory(nil)
	var tile_raw [16]uint8 = [16]uint8{0xF0, 0x00, 0xF0, 0x00, 0xFC, 0x00, 0xFC, 0x00, 0xFC, 0x00, 0xFC, 0x00, 0xF3, 0x00, 0xF3, 0x05}

	var tile []uint8 = gpu.decode_tile(tile_raw)

	var cp = reflect.DeepEqual(tile, []uint8{
		0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00,
		0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00,
		0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00,
		0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x01, 0x01,
		0x01, 0x01, 0x01, 0x01, 0x00, 0x02, 0x01, 0x03,
	})

	if !cp {
		t.Errorf("Invalid tile")
	}
}
